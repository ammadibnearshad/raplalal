<div class="twentieth-fifth-form" id="{{ section.settings.form_25_unique_id }}" style="display: none;">
  <div class="form-block-wrapper form-block-25 flex-block flex-center option-box-v2">
    <div class="left-block">
      <div class="left-block-box">
        <!-- <div class="block-num">25</div> -->
        <div class="content-box">
          <p class="ques-text content-heading">{{ section.settings.form_25_question }}</p>
          <div class="options-box">
            {% if section.settings.form_25_option_1 != blank %}
              <div
                class="option option1"
                onclick="handleOptionClick25(event, '{{ section.settings.form_25_option_1 | replace: "'","" }}')"
              >
                <span>A</span> {{ section.settings.form_25_option_1 | replace: "'","" }}
              </div>
            {% endif %}
            {% if section.settings.form_25_option_2 != blank %}
              <div
                class="option option1"
                onclick="handleOptionClick25(event, '{{ section.settings.form_25_option_2 | replace: "'","" }}')"
              >
                <span>B</span> {{ section.settings.form_25_option_2 | replace: "'","" }}
              </div>
            {% endif %}
            {% if section.settings.form_25_option_3 != blank %}
              <div
                class="option option1"
                onclick="handleOptionClick25(event, '{{ section.settings.form_25_option_3 | replace: "'","" }}')"
              >
                <span>C</span> {{ section.settings.form_25_option_3 | replace: "'","" }}
              </div>
            {% endif %}
            {% if section.settings.form_25_option_4 != blank %}
              <div
                class="option option1"
                onclick="handleOptionClick25(event, '{{ section.settings.form_25_option_4 | replace: "'","" }}')"
              >
                <span>D</span> {{ section.settings.form_25_option_4 | replace: "'","" }}
              </div>
            {% endif %}
          </div>
          <div class="autre-field form-group" style="display: none;">
            <input
              type="text"
              class="form-control"
              id="autreInput25"
              placeholder="Enter your autre"
              oninput="handleAutreInput25()"
            >
          </div>
          <div class="buttons">
            <button
              id="backButton25"
              class="button"
              onclick="showPreviousSnippet25('do_not_repair_form')"
            >
              {{ section.settings.back_btn_text }}
            </button>
            <button
              id="nextButton25"
              onclick="showNextSnippet25('story_form')"
              class="button"
              style="display: none;"
            >
              {{ section.settings.next_btn_text }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  const options25 = document.querySelectorAll('.form-block-25 .options-box .option');
  const backButton25 = document.getElementById('backButton25');
  const nextButton25 = document.getElementById('nextButton25');
  const autreField25 = document.querySelector('.form-block-25 .autre-field');
  const autreInput25 = document.getElementById('autreInput25');

  function handleOptionClick25(event, optionText) {
    // const clickedOptionText = event.currentTarget.textContent.trim().replace(/[A-Z]\s/, '');
    // alert('s');
    const selectedOption = event.currentTarget;
console.log(selectedOption);
    options25.forEach(option => {
      option.classList.remove('selected');
    });

    selectedOption.classList.add('selected');

    const clickedOptionText = optionText;
    const lastOptionText = getLastOptionText25();
    console.log(lastOptionText);
    console.log(lastOptionText.trim());
    
    if (clickedOptionText === lastOptionText.trim()) {
      autreField25.style.display = 'block';
      nextButton25.style.display = 'none';
      setLineItemValue25(autreInput25.value);
    } else {
      autreField25.style.display = 'none';
      nextButton25.style.display = 'block';
      setLineItemValue25(clickedOptionText);
      
    }
  }

  function getLastOptionText25() {
    const lastOption = options25[options25.length - 1].textContent.trim();
    const optionTextNew = lastOption.substring(1);
    return optionTextNew;
  }

  function handleAutreInput25() {
    if (autreInput25.value.trim() !== '' && autreField25.style.display === 'block') {
      nextButton25.style.display = 'block';
      setLineItemValue25(autreInput25.value);
    } else {
      nextButton25.style.display = 'none';
    }
  }

  function setLineItemValue25(value) {
    const currentSnippet25 = document.getElementById('{{ section.settings.form_25_unique_id }}');
    const snippetId25 = currentSnippet25.id;
    const lineItemId25 = `line_item-${snippetId25}`;
    const inputField25 = document.getElementById(lineItemId25);

    if (inputField25) {
      inputField25.value = value;
      console.log(inputField25.value);
    }
  }

  function showNextSnippet25(nextSnippetId) {
    const currentSnippet25 = document.getElementById('{{ section.settings.form_25_unique_id }}');
    currentSnippet25.style.display = 'none';

    const nextSnippet25 = document.getElementById(nextSnippetId);
    if (nextSnippet25) {
      nextSnippet25.style.display = 'block';
    }
  }

  function showPreviousSnippet25(previousSnippetId) {
    const previousSnippet25 = document.getElementById(previousSnippetId);
    if (previousSnippet25) {
      previousSnippet25.style.display = 'block';
    }

    const currentSnippet25 = document.getElementById('{{ section.settings.form_25_unique_id }}');
    currentSnippet25.style.display = 'none';
  }
</script>
